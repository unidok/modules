{"handlers":[{"type":"event","position":0.0,"operations":[{"action":"set_variable_value","values":[{"name":"variable","value":{"type":"variable","variable":"minPay","scope":"game"}},{"name":"value","value":{"type":"number","number":10.0}}]},{"action":"empty","values":[]},{"action":"set_variable_create_list","values":[{"name":"values","value":{"type":"array","values":[{"type":"text","text":"command: pay, executor: \"Eco.payCommand\", description: \"Переводит деньги игроку\""},{"type":"text","text":"command: balance, executor: \"Eco.balanceCommand\", aliases: [bal], description: \"Управление балансом\""},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]}},{"name":"variable","value":{"type":"variable","variable":"commands","scope":"local"}}]},{"action":"set_variable_create_list","values":[{"name":"values","value":{"type":"array","values":[{"type":"text","text":"module: rejoining, release: 0, version: \"1.0\", id: \"https://modules.unidok.repl.co/unidok@rejoining\""},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]}},{"name":"variable","value":{"type":"variable","variable":"depends","scope":"local"}}]},{"action":"set_variable_create_list","values":[{"name":"values","value":{"type":"array","values":[{"type":"text","text":"release"},{"type":"text","text":"version"},{"type":"text","text":"commands"},{"type":"text","text":"authors"},{"type":"text","text":"depends"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]}},{"name":"variable","value":{"type":"variable","variable":"keys","scope":"local"}}]},{"action":"set_variable_create_list","values":[{"name":"values","value":{"type":"array","values":[{"type":"number","number":0.0},{"type":"text","text":"1.0"},{"type":"variable","variable":"commands","scope":"local"},{"type":"text","text":"unidok"},{"type":"variable","variable":"depends","scope":"local"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]}},{"name":"variable","value":{"type":"variable","variable":"values","scope":"local"}}]},{"action":"set_variable_create_map","values":[{"name":"variable","value":{"type":"variable","variable":"mapi\u003deconomy","scope":"game"}},{"name":"keys","value":{"type":"variable","variable":"keys","scope":"local"}},{"name":"values","value":{"type":"variable","variable":"values","scope":"local"}}]},{"action":"set_variable_value","values":[{"name":"variable","value":{"type":"variable","variable":"ecopref","scope":"game"}},{"name":"value","value":{"type":"text","text":"\u0026#95fb01E\u0026#9efb07c\u0026#a7fc0co\u0026#b0fc12n\u0026#b9fc17o\u0026#c2fd1dm\u0026#cbfd22y \u00268» \u0026f"}}]},{"action":"control_wait","values":[{"name":"duration","value":{"type":"number","number":1.0}}]},{"action":"select_player_by_conditional","values":[{"name":"privilege","value":{"type":"enum","enum":"DEVELOPER"}}],"conditional":{"action":"if_player_has_privilege","is_inverted":"false"}},{"action":"if_variable_exists","values":[{"name":"variable","value":{"type":"variable","variable":"pcmd","scope":"game"}}],"operations":[{"action":"player_send_message","selection":{"type":"current"},"values":[{"name":"messages","value":{"type":"array","values":[{"type":"text","text":"%var(ecopref)\u0026#a6ff6eПомощь: \u0026#abc4d6%var(pcmd)about economy"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]}}]}]},{"action":"else","values":[],"operations":[{"action":"player_send_message","selection":{"type":"current"},"values":[{"name":"messages","value":{"type":"array","values":[{"type":"text","text":"%var(ecopref)\u0026#ff6e6eНеобходим \u0026#ffb657MAPI \u0026#abc4d60.6.7 \u0026#7a8085(\u0026#abc4d6/module load unidok/mapi\u0026#7a8085)"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]}}]}]}],"event":"world_start"},{"type":"function","position":1.0,"operations":[{"action":"set_variable_create_list","values":[{"name":"values","value":{"type":"array","values":[{"type":"text","text":"type: Player, name: player"},{"type":"text","text":"type: Number, name: pay"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{"type":"text","text":"type: Option, exception: \"%var(ecopref)Использование: \u00267$scmd \u0026b\u003cник\u003e \u0026e\u003cсумма\u003e\""}]}},{"name":"variable","value":{"type":"variable","variable":"args","scope":"local"}}]},{"action":"call_function","values":[{"name":"function_name","value":{"type":"text","text":"Mapi.commandConstructor"}}]},{"action":"if_player_name_equals","values":[{"name":"names_or_uuids","value":{"type":"array","values":[{"type":"variable","variable":"player","scope":"local"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]}}],"operations":[{"action":"if_variable_greater_or_equals","values":[{"name":"value","value":{"type":"variable","variable":"pay","scope":"local"}},{"name":"compare","value":{"type":"variable","variable":"minPay","scope":"game"}}],"operations":[{"action":"if_variable_greater_or_equals","values":[{"name":"value","value":{"type":"variable","variable":"%player%_balance","scope":"save"}},{"name":"compare","value":{"type":"variable","variable":"pay","scope":"local"}}],"operations":[{"action":"set_variable_decrement","values":[{"name":"variable","value":{"type":"variable","variable":"%player%_balance","scope":"save"}},{"name":"number","value":{"type":"variable","variable":"pay","scope":"local"}}]},{"action":"set_variable_increment","values":[{"name":"variable","value":{"type":"variable","variable":"%var_local(player)_balance","scope":"save"}},{"name":"number","value":{"type":"variable","variable":"pay","scope":"local"}}]},{"action":"player_send_message","values":[{"name":"messages","value":{"type":"array","values":[{"type":"text","text":"%var(ecopref)\u0026#a6ff6eВы перечислили \u0026#ffef44%var_local(pay) \u0026#ddd03b◎ \u0026#a6ff6eигроку \u0026#abc4d6%var_local(player)"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]}}]},{"action":"player_play_sound","values":[{"name":"sound","value":{"type":"sound","sound":"minecraft:entity.experience_orb.pickup","pitch":1.0,"volume":1.0}},{"name":"location","value":{"type":"game_value","game_value":"location","selection":"{\"type\":\"default\"}"}}]},{"action":"select_player_by_name","values":[{"name":"name_or_uuid","value":{"type":"variable","variable":"player","scope":"local"}}]},{"action":"player_send_message","values":[{"name":"messages","value":{"type":"array","values":[{"type":"text","text":"%var(ecopref)\u0026#a6ff6eВам начислено \u0026#ffef44%var_local(pay) \u0026#ddd03b◎ \u0026#a6ff6eот \u0026#abc4d6%player%"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]}}]},{"action":"player_play_sound","values":[{"name":"sound","value":{"type":"sound","sound":"minecraft:entity.experience_orb.pickup","pitch":1.0,"volume":1.0}},{"name":"location","value":{"type":"game_value","game_value":"location","selection":"{\"type\":\"default\"}"}}]}]},{"action":"else","values":[],"operations":[{"action":"player_send_message","values":[{"name":"messages","value":{"type":"array","values":[{"type":"text","text":"%var(ecopref)\u0026#ff6e6eВам не хватает \u0026#ffef44%math(%var_local(pay)-%var_save(%player%_balance)) \u0026#ddd03b◎"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]}}]},{"action":"player_play_sound","values":[{"name":"sound","value":{"type":"sound","sound":"minecraft:block.lava.extinguish","pitch":2.0,"volume":0.5}},{"name":"location","value":{"type":"game_value","game_value":"location","selection":"{\"type\":\"default\"}"}}]}]}]},{"action":"else","values":[],"operations":[{"action":"player_send_message","values":[{"name":"messages","value":{"type":"array","values":[{"type":"text","text":"%var(ecopref)\u0026#ff6e6eМинимальная сумма перевода \u0026#ffef44%var(minPay) \u0026#ddd03b◎"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]}}]},{"action":"player_play_sound","values":[{"name":"sound","value":{"type":"sound","sound":"minecraft:block.lava.extinguish","pitch":2.0,"volume":0.5}},{"name":"location","value":{"type":"game_value","game_value":"location","selection":"{\"type\":\"default\"}"}}]}]}],"is_inverted":"true"},{"action":"else","values":[],"operations":[{"action":"player_send_message","values":[{"name":"messages","value":{"type":"array","values":[{"type":"text","text":"%var(ecopref)\u0026#ff6e6eНельзя перевести деньги самому себе"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]}}]},{"action":"player_play_sound","values":[{"name":"sound","value":{"type":"sound","sound":"minecraft:block.lava.extinguish","pitch":2.0,"volume":0.5}},{"name":"location","value":{"type":"game_value","game_value":"location","selection":"{\"type\":\"default\"}"}}]}]}],"values":[{"name":"description","value":{"type":"array","values":[{},{},{},{},{},{},{},{},{},{},{},{},{},{}]}},{"name":"is_hidden","value":{"type":"enum","enum":"TRUE"}},{"name":"icon","value":{"type":"item","item":"{}"}}],"name":"Eco.payCommand"},{"type":"function","position":2.0,"operations":[{"action":"if_player_has_privilege","values":[{"name":"privilege","value":{"type":"enum","enum":"WHITELISTED"}}],"operations":[{"action":"set_variable_create_list","values":[{"name":"values","value":{"type":"array","values":[{"type":"text","text":"name: subCommand, equals: [set, take, add, show]"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{"type":"text","text":"type: Option, maxArguments: 3, exception: \"%var(ecopref)Использование: \u00267$scmd \u0026b\u003cset\u00267|\u0026btake\u00267|\u0026badd\u00267|\u0026bshow\u003e\""}]}},{"name":"variable","value":{"type":"variable","variable":"args","scope":"local"}}]},{"action":"call_function","values":[{"name":"function_name","value":{"type":"text","text":"Mapi.commandConstructor"}}]},{"action":"if_variable_equals","values":[{"name":"compare","value":{"type":"array","values":[{"type":"text","text":"set"},{"type":"text","text":"add"},{"type":"text","text":"take"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]}},{"name":"value","value":{"type":"variable","variable":"subCommand","scope":"local"}}],"operations":[{"action":"set_variable_create_list","values":[{"name":"values","value":{"type":"array","values":[{"type":"number","number":0.0},{"type":"text","text":"name: player"},{"type":"text","text":"type: Number, name: sum, greater_or_equals: 0"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{"type":"text","text":"type: Option, exception: \"%var(ecopref)Использование: \u00267$scmd %var_local(subCommand) \u0026b\u003cник\u003e \u0026e\u003cсумма\u003e\""}]}},{"name":"variable","value":{"type":"variable","variable":"args","scope":"local"}}]},{"action":"call_function","values":[{"name":"function_name","value":{"type":"text","text":"Mapi.commandConstructor"}}]},{"action":"if_variable_equals","values":[{"name":"compare","value":{"type":"array","values":[{"type":"text","text":"set"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]}},{"name":"value","value":{"type":"variable","variable":"subCommand","scope":"local"}}],"operations":[{"action":"set_variable_value","values":[{"name":"variable","value":{"type":"variable","variable":"%var_local(player)_balance","scope":"save"}},{"name":"value","value":{"type":"variable","variable":"sum","scope":"local"}}]},{"action":"player_send_message","values":[{"name":"messages","value":{"type":"array","values":[{"type":"text","text":"%var(ecopref)\u0026#a6ff6eБаланс игрока \u0026#abc4d6%var_local(player) \u0026#7a8085\u003d \u0026#ffef44%var_local(sum) \u0026#ddd03b◎"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]}}]}]},{"action":"if_variable_equals","values":[{"name":"compare","value":{"type":"array","values":[{"type":"text","text":"add"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]}},{"name":"value","value":{"type":"variable","variable":"subCommand","scope":"local"}}],"operations":[{"action":"set_variable_increment","values":[{"name":"variable","value":{"type":"variable","variable":"%var_local(player)_balance","scope":"save"}},{"name":"number","value":{"type":"variable","variable":"sum","scope":"local"}}]},{"action":"player_send_message","values":[{"name":"messages","value":{"type":"array","values":[{"type":"text","text":"%var(ecopref)\u0026#a6ff6eБаланс игрока \u0026#abc4d6%var_local(player) \u0026#7a8085+\u003d \u0026#ffef44%var_local(sum) \u0026#ddd03b◎"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]}}]}]},{"action":"if_variable_equals","values":[{"name":"compare","value":{"type":"array","values":[{"type":"text","text":"take"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]}},{"name":"value","value":{"type":"variable","variable":"subCommand","scope":"local"}}],"operations":[{"action":"set_variable_clamp","values":[{"name":"variable","value":{"type":"variable","variable":"sum","scope":"local"}},{"name":"number","value":{"type":"variable","variable":"sum","scope":"local"}},{"name":"min","value":{"type":"number","number":0.0}},{"name":"max","value":{"type":"variable","variable":"%var_local(player)_balance","scope":"save"}}]},{"action":"set_variable_decrement","values":[{"name":"variable","value":{"type":"variable","variable":"%var_local(player)_balance","scope":"save"}},{"name":"number","value":{"type":"variable","variable":"sum","scope":"local"}}]},{"action":"player_send_message","values":[{"name":"messages","value":{"type":"array","values":[{"type":"text","text":"%var(ecopref)\u0026#a6ff6eБаланс игрока \u0026#abc4d6%var_local(player) \u0026#7a8085-\u003d \u0026#ffef44%var_local(sum) \u0026#ddd03b◎"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]}}]}]},{"action":"player_play_sound","values":[{"name":"sound","value":{"type":"sound","sound":"minecraft:entity.experience_orb.pickup","pitch":1.0,"volume":1.0}},{"name":"location","value":{"type":"game_value","game_value":"location","selection":"{\"type\":\"default\"}"}}]}]},{"action":"else","values":[],"operations":[{"action":"set_variable_create_list","values":[{"name":"values","value":{"type":"array","values":[{"type":"number","number":0.0},{"type":"text","text":"name: player"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{"type":"text","text":"type: Option, exception: \"%var(ecopref)Использование: \u00267$scmd %var_local(subCommand) \u0026b\u003cник\u003e\""}]}},{"name":"variable","value":{"type":"variable","variable":"args","scope":"local"}}]},{"action":"call_function","values":[{"name":"function_name","value":{"type":"text","text":"Mapi.commandConstructor"}}]},{"action":"player_send_message","values":[{"name":"messages","value":{"type":"array","values":[{"type":"text","text":"%var(ecopref)\u0026#a6ff6eБаланс игрока \u0026#abc4d6%var_local(player) \u0026#ffef44%var_save(%var_local(player)_balance) \u0026#ddd03b◎"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]}}]}]}]},{"action":"else","values":[],"operations":[{"action":"set_variable_create_list","values":[{"name":"values","value":{"type":"array","values":[{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{"type":"text","text":"type: Option, exception: \"%var(ecopref)Использование: \u00267$scmd\""}]}},{"name":"variable","value":{"type":"variable","variable":"args","scope":"local"}}]},{"action":"call_function","values":[{"name":"function_name","value":{"type":"text","text":"Mapi.commandConstructor"}}]},{"action":"player_send_message","values":[{"name":"messages","value":{"type":"array","values":[{"type":"text","text":"%var(ecopref)\u0026#ffef44%var_save(%player%_balance) \u0026#ddd03b◎"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]}}]}]}],"values":[],"name":"Eco.balanceCommand"},{"type":"function","position":3.0,"operations":[{"action":"if_variable_exists","values":[{"name":"variable","value":{"type":"variable","variable":"player","scope":"local"}}],"operations":[{"action":"set_variable_value","values":[{"name":"variable","value":{"type":"variable","variable":"player","scope":"local"}},{"name":"value","value":{"type":"game_value","game_value":"name","selection":"{\"type\":\"default\"}"}}]}],"is_inverted":"true"},{"action":"if_variable_greater_or_equals","values":[{"name":"value","value":{"type":"variable","variable":"%var_local(player)_balance","scope":"save"}},{"name":"compare","value":{"type":"variable","variable":"price","scope":"local"}}],"operations":[{"action":"set_variable_decrement","values":[{"name":"variable","value":{"type":"variable","variable":"%var_local(player)_balance","scope":"save"}},{"name":"number","value":{"type":"variable","variable":"price","scope":"local"}}]}]},{"action":"else","values":[],"operations":[{"action":"player_send_message","values":[{"name":"messages","value":{"type":"array","values":[{"type":"text","text":"%var(ecopref)\u0026#ff6e6eВам не хватает \u0026#ffef44%math(%var_local(price)-%var_save(%player%_balance)) \u0026#ddd03b◎"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]}}]},{"action":"player_play_sound","values":[{"name":"sound","value":{"type":"sound","sound":"minecraft:block.lava.extinguish","pitch":2.0,"volume":0.5}},{"name":"location","value":{"type":"game_value","game_value":"location","selection":"{\"type\":\"default\"}"}}]},{"action":"control_end_thread","values":[]}]}],"values":[{"name":"description","value":{"type":"array","values":[{"type":"text","text":"Списывает деньги у игрока, если они есть"},{"type":"text","text":"\u0026a%var_local(price) \u00268- \u00267сумма для списывания"},{"type":"text","text":"\u0026a%var_local(player) \u0026#7a8085(по умолчанию %player%) \u00268- \u00267игрок, у которого списывать деньги"},{},{},{},{},{},{},{},{},{},{},{}]}},{"name":"is_hidden","value":{"type":"enum","enum":"FALSE"}},{"name":"icon","value":{"type":"item","item":"{Count:1b,id:\"minecraft:gold_ingot\",tag:{display:{Lore:[\u0027{\"italic\":false,\"underlined\":false,\"color\":\"white\",\"text\":\"Списывает деньги у игрока, если они есть\"}\u0027,\u0027{\"italic\":false,\"underlined\":false,\"color\":\"white\",\"extra\":[{\"color\":\"green\",\"text\":\"%var_local(price) \"},{\"color\":\"dark_gray\",\"text\":\"- \"},{\"color\":\"gray\",\"text\":\"сумма для списывания\"}],\"text\":\"\"}\u0027,\u0027{\"italic\":false,\"underlined\":false,\"color\":\"white\",\"extra\":[{\"color\":\"green\",\"text\":\"%var_local(player) \"},{\"color\":\"#7a8085\",\"text\":\"(по умолчанию %player%) \"},{\"color\":\"dark_gray\",\"text\":\"- \"},{\"color\":\"gray\",\"text\":\"игрок, у которого списывать деньги\"}],\"text\":\"\"}\u0027,\u0027{\"text\":\"\"}\u0027,\u0027{\"italic\":false,\"color\":\"#7a8085\",\"text\":\"Нажмите Правой кнопкой, чтобы\"}\u0027,\u0027{\"italic\":false,\"color\":\"#7a8085\",\"text\":\"телепортироваться к функции\"}\u0027],Name:\u0027{\"italic\":false,\"color\":\"yellow\",\"text\":\"Eco.take\"}\u0027}}}"}}],"name":"Eco.take"},{"type":"event","position":4.0,"operations":[{"action":"if_variable_exists","values":[{"name":"variable","value":{"type":"variable","variable":"%player%_rejoined","scope":"game"}}],"operations":[{"action":"repeat_while","values":[{"name":"names_or_uuids","value":{"type":"array","values":[{"type":"game_value","game_value":"name","selection":"{\"type\":\"default\"}"},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}]}}],"operations":[{"action":"player_set_boss_bar","values":[{"name":"color","value":{"type":"enum","enum":"YELLOW"}},{"name":"id","value":{"type":"text","text":"balance"}},{"name":"title","value":{"type":"text","text":"\u0026#ffef44%var_save(%player%_balance) \u0026#ddd03b◎"}},{"name":"progress","value":{"type":"number","number":100.0}}]},{"action":"control_wait","values":[{"name":"duration","value":{"type":"number","number":1.0}}]}],"conditional":{"action":"if_game_has_player","is_inverted":"false"}}],"is_inverted":"true"}],"event":"player_join"}]}